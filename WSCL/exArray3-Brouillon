<!DOCTYPE html>
<html>

<head>
    <title>JS exArray3</title>
    <meta charset="UTF-8">
</head>

<body>
    <script>
        //1. Déclarez et affichez de façon brute les tableaux
        let tabPromos = [0.05, 0.1, 0.2];
        console.log(tabPromos);

        let tabVilles = ["Bruxelles", "Mons", "Anvers", "Gand", "Bruges"];
        console.log(tabVilles);

        let tabJours = ["dimanche", "lundi", "mardi", "mercredi", "jeudi", "vendredi", "samedi"];
        console.log(tabJours);

        let tabMois = ["janvier", "février", "mars", "avril", "mai", "juin", "juillet", "août", "septembre", "octobre", "novembre", "décembre"];
        console.log(tabMois);

        let tabGroupes = new Array(
            new Array(
                "Liesbeth",
                "Félix",
                "Amédée",
                "Ismaël",
                "Sigourney",
            ),
            new Array(
                "Andrew",
                "Julia",
            ),
            new Array(

            ),
            new Array(
                "Björk",
                "Kristel",
                "Lana",
            ),
        );
        console.log(tabGroupes);

        let tabAgenda = new Array(
            new Array(
                "01/01/2015",
                "Déjeuner de Nouvel An",
                "avec Lydia",
                "au Bon Pain",
                "true",
            ),
            new Array(
                "03/01/2015",
                "Ballade en ville",
                "seul",
                "au centre-ville",
                "false",
            ),
            new Array(
                "15/03/2016",
                "Festival de cinéma",
                "avec l'équipe",
                "à CinéMotion",
                "true",
            ),
        );
        console.log(tabAgenda);

        let tabEquipe = new Array(
            "Fred",
            "Max",
            "Liv",
            "Lydia",
        );
        console.log(tabEquipe);

        //2. Appliquez chaque promo du tableau tabPromos à un montant de 100 €.
        montantBase = 100;
        document.write("2. Prix initial:" + montantBase + " €<br>");
        for (let i = 0; i < tabPromos.length; i++) {
            document.write("Promo " + tabPromos[i] * 100 + "% => " + (montantBase - (montantBase * tabPromos[i])) + " €<br>");
        }

        //3. Affichez les villes du tableau tabVilles sous forme de liste ordonnée (ol).
        document.write("3.<ol>");
        for (let i = 0; i < tabVilles.length; i++) {
            document.write("<li>" + tabVilles[i] + "</li>");
        }
        document.write("</ol>");

        //4. Affichez les villes du tableau tabVilles triées par ordre alphabétique croissant.
        document.write("4.");
        tabVilles.sort();
        lastCity = tabVilles[tabVilles.length - 1];
        for (let i = 0; i < tabVilles.length; i++) {
            if (tabVilles[i] != lastCity) {
                document.write(tabVilles[i] + ",");
            } else {
                document.write(lastCity);
            }
        }
        document.write("<br>");
        //5. Affichez les villes du tableau tabVilles triées par ordre alphabétique décroissant. Pour cela, définissez une fonction de tri.
        document.write("5.");
        tabVilles.sort((a, b) => b - a);
        lastCity = tabVilles[tabVilles.length - 1];
        for (let i = 0; i < tabVilles.length; i++) {
            if (tabVilles[i] != lastCity) {
                document.write(tabVilles[i] + ",");
            } else {
                document.write(lastCity);
            }
        }
        document.write("<br>");

        //6. En utilisant le tableau tabGroupes
        //6.a. Affichez les membres du premier groupe (Liesbeth, Félix, etc.)
        document.write("6.a: ");
        for (let i = 0; i < tabGroupes.length; i++) {
            document.write(tabGroupes[i]);
            break;
        }
        document.write("<br>");

        //6.b. Affichez les membres du dernier groupe (Björk, Kristel, etc.)
        document.write("6.b: ");
        for (let i = tabGroupes.length; i > 0; i--) { //.length retourne 4 => le dernier index est 3
            document.write(tabGroupes[i - 1]); //Il faut retirer 1 de i pour avoir le dernier groupe
            break;
        }
        document.write("<br>");

        //6.c. Affichez le premier membre du deuxième groupe (Andrew)
        document.write("6.c: ");
        for (let i = 1; i < tabGroupes.length; i++) {
            if (i === 1) {
                document.write(tabGroupes[i][0]);
                break;
            }
        }
        document.write("<br>");

        //6.d. Affichez l'avant-dernier membre du premier groupe (Ismaël)
        document.write("6.d: ");
        for (let i = 0; i < tabGroupes.length; i++) {
            if (i === 0) {
                for (let j = tabGroupes[i].length; j > 0; j--) {
                    if (j === (tabGroupes[i].length - 2)) {
                        document.write(tabGroupes[i][j]);
                        break;
                    }
                }
            }
        }
        document.write("<br>");

        //6.e. Affichez le nombre de membres de chaque groupe (4, 2, 0, 3)
        document.write("6.e: ");
        for (let i = 0; i < tabGroupes.length; i++) {
            document.write("Groupe " + i + ": " + tabGroupes[i].length + "<br>");
        }

        //6.f. Affichez tous les groupes de plus de deux membres
        document.write("6.f: ");
        for (let i = 0; i < tabGroupes.length; i++) {
            if (tabGroupes[i].length > 2) {
                document.write("Groupe " + i + ": " + tabGroupes[i].length + "<br>");
            }
        }

        //6.g. Affichez quels groupes sont vides (3e groupe)
        document.write("6.g: ");
        for (let i = 0; i < tabGroupes.length; i++) {
            if (tabGroupes[i].length === 0) {
                document.write("Groupe " + i + ": " + tabGroupes[i].length);
            }
        }
        document.write("<br>");

        //6.h. Affichez dans quel groupe se trouve Lana (4e groupe)
        document.write("6.h: ")
        for (let i = 0; i < tabGroupes.length; i++) {
            for (let j = 0; j < tabGroupes[i].length; j++) {
                if (tabGroupes[i][j] === "Lana") {
                    document.write("Lana se trouve dans le " + (i + 1) + "ème groupe");
                }
            }
        }
        document.write("<br>");

        //6.i. Dites si Julia et Amédée sont dans le même groupe (non)
        document.write("6.i: ");
        let groupeJulia = 0;
        let groupeAmedee = 0;
        for (let i = 0; i < tabGroupes.length; i++) {
            for (let j = 0; j < tabGroupes[i].length; j++) {
                if (tabGroupes[i][j] === "Amédée") {
                    groupeAmedee = i + 1;
                }
                if (tabGroupes[i][j] === "Julia") {
                    groupeJulia = i + 1;
                }
            }
        }
        if (groupeJulia === groupeAmedee) {
            document.write("Julia et Amédée sont dans le même groupe!");
        } else {
            document.write("Julia et Amédée ne sont pas dans le même groupe!");
        }
        document.write("<br>");

        //6.j. Affichez quel groupe a le plus de membres (1er groupe)
        document.write("6.j: ");
        let nbMax = 0;
        let groupeMax = 0;
        for (let i = 0; i < tabGroupes.length; i++) {
            if (tabGroupes[i].length > nbMax) {
                nbMax = tabGroupes[i].length; //1
            }
            if (nbMax === tabGroupes[i]) {
                groupeMax = i;
            }
        }
        document.write("Le groupe ayant le plus de membre: Groupe " + (groupeMax + 1));
        document.write("<br>");

        //6.k. Déplacez Félix dans le 3e groupe
        document.write("6.k: ");
        for (let i = 0; i < tabGroupes.length; i++) {
            for (let j = 0; j < tabGroupes[i].length; j++) {
                if (tabGroupes[i][j] === "Félix") {
                    tabGroupes[2][0] = tabGroupes[i][j];
                    tabGroupes[0].splice("Félix", 1);
                    break;
                }
            }
        }
        document.write(tabGroupes[2]);
        document.write("<br>");

        //6.l. Ajoutez Marcus en dernier dans le 2e groupe
        document.write("6.l: ");
        for (let i = 0; i < tabGroupes.length; i++) {
            if (i == 1) {
                tabGroupes[1].push("Marcus");
                break;
            }
        }
        document.write("Marcus");
        document.write("<br>");

        //6.m. Ajoutez Sibylle en 2e position du 2e groupe
        document.write("6.m: ");
        for (let i = 0; i < tabGroupes.length; i++) {
            for (let j = 0; j < tabGroupes[i].length; j++) {
                if ((i === 1) && (j === 1)) {
                    tabGroupes[i].splice(j, 0, "Sybille");
                    break;
                }
            }
        }
        document.write(tabGroupes[1][1]);
        document.write("<br>");

        //6.n. Ajoutez Carlos en première position du dernier groupe
        document.write("6.n: ");
        for (let i = tabGroupes.length; i > 0; i--) {
            if (i === 3) {
                tabGroupes[i].unshift("Carlos");
                break;
            }
        }
        document.write(tabGroupes[3][0]);
        document.write("<br>");

        //6.o. Déplacez Sigourney dans le groupe de Julia
        document.write("6.o: ");
        for (let i = 0; i < tabGroupes.length; i++) {
            for (let j = 0; j < tabGroupes[i].length; j++) {
                if (tabGroupes[i][j] === "Sigourney") {
                    tabGroupes[1].push(tabGroupes[i][j]);
                    tabGroupes[i].splice(j, 1);
                    break;
                }
            }
        }
        document.write(tabGroupes[1]);
        document.write("<br>");

        //6.p. Supprimez 2 membres au hasard dans le premier groupe
        tabGroupes[0] = ["Liesbeth", "Amédée", "Ismaël"]
        document.write("6.p: ");
        let random_key = 0;
        for (let i = 0; i < 2; i++) {
            random_key = Math.floor(Math.random() * tabGroupes[0].length);
            tabGroupes[0].splice(random_key, 1);
        }
        document.write(tabGroupes[0]);
        document.write("<br>");

        //6.q. Triez les groupes par ordre de grandeur
        document.write("6.q: ");
        function sortGrandeur(a, b) {
            if (a.length < b.length) return 1;
            if (a.length > b.length) return -1;
            return 0;
        }
        tabGroupes.sort(sortGrandeur);
        document.write("Taille du premier groupe, après tri: " + tabGroupes[0].length);
        document.write("<br>");

        //6.r. Triez les groupes par ordre alphabétique du prénom du premier membre.
        document.write("6.r: ");
        function sortAlpha(a, b) {
            let textA = a[0].charAt(0);
            let textB = b[0].charAt(0);
            return (textA < textB) ? -1 : (textA > textB) ? 1 : 0;
        }
        tabGroupes.sort(sortAlpha);
        document.write("Première personne après tri alphabétique: " + tabGroupes[0][0]);
        document.write("<br>");

        //7.a. d'afficher le libellé de tous les rendez-vous
        document.write("7.a: ");

        for (let i = 0; i < tabAgenda.length; i++) {
            document.write("Rendez-vous " + (i + 1) + ": ");
            for (let j = 1; j < 4; j++) {
                document.write(tabAgenda[i][j] + " ");
            }
            document.write("<br>");
        }

        //7.b. d'afficher la date en toutes lettres et le libellé d'un rendez-vous au hasard
        let random_index = 0;
        for (let i = 0; i < 1; i++) {
            random_index = Math.floor(Math.random() * tabAgenda.length); //Index pris au hasard
        }
        let options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }; //date() options
        document.write("7.b: Rendez-vous " + (random_index + 1) + ": ");
        for (let j = 0; j < tabAgenda[random_index].length; j++) {
            if (j === 0) {
                document.write(new Date(...tabAgenda[random_index][0].split('/').reverse().map((p, i) => p - (i % 2))).toLocaleDateString('fr-FR', options) + " ");
                j++; //Incrémentation pour éviter un doublon dans l'output
            }
            document.write(tabAgenda[random_index][j] + " ");
            if (j === 3) { //Enlever le true/false de l'index 3 dans l'output
                break;
            }
        }
        document.write("<br>");

        //7.c. d'afficher le libellé de tous les rendez-vous confirmé
        document.write("7.c: ");
        for (let i = 0; i < tabAgenda.length; i++) {
            if (tabAgenda[i][4] === "true") {
                document.write("Rendez-vous " + (i + 1) + ": ");
                for (let j = 1; j < tabAgenda[i].length; j++) {
                    document.write(tabAgenda[i][j] + " ");
                    if (j === 3) {
                        break;
                    }
                }
                document.write("<br>");
            }
        }

        //7.d. d'afficher la date en abrégé et le libellé du premier rendez en mars
        document.write("7.d: ");
        options = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' }; //date() options
        for (let i = 0; i < tabAgenda.length; i++) {
            if (tabAgenda[i][0].indexOf('03') > 2) {
                document.write(new Date(...tabAgenda[i][0].split('/').reverse().map((p, i) => p - (i % 2))).toLocaleDateString('fr-FR', options) + " ");
                for (let j = 1; j < tabAgenda[i].length; j++) {
                    document.write(tabAgenda[i][j] + " ");
                    if (j === 3) {
                        break;
                    }
                }
                document.write("<br>");
            }
        }

        /*
        e. d'afficher le libellé de tous les rendez-vous auxquels Lydia participe ;
        f. d'afficher le lieu des tous les rendez-vous de l'année en cours ;
        g. d'afficher les dates de rendez-vous de l'année prochaine (sachant que nous sommes le 06/08/2015) ;
        h. d'afficher le libellé de tous les rendez-vous en janvier 2015 ;
        i. d'afficher le libellé de tous les rendez-vous du 15 mars 2016 ;
        j. d'afficher le libellé de tous les rendez-vous en avant mai 2015 ;
        k. d'afficher combien de rendez-vous se feront tout seul;
        l. de trier les rendez-vous par ordre chronologique décroissant,
        m. de reporter le premier rendez-vous deux semaines plus tard (déjeuner de Nouvel An du 1er janvier 2015 => 15/01/2015),
        n. de confirmer et d'ajouter Marco et Franck à la Ballade en ville du 03/01/2015. */
    </script>
</body>

</html>
