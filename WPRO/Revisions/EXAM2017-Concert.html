<html>
<script>
    /* Programme qui permet de réserver des tickets pour trois concerts proposés et qui calcule puis affiche le montant total à payer.
    * L'utilisateur entrera au clavier le code du concert choisi parmi une liste prédéfinie
    * Il indiquera ensuite la quantité de ticket désirée pour ce concert.
    * L’utilisateur doit pouvoir ensuite recommencer la phase de sélection 
    * Il devra ensuite indiquer s'il désire afficher le détail du montant calculé ou seulement le total.
    *
    * Affichage détailé:
    * Votre sélection:                
    *  •   2 x Garland Jeffreys (26 €)   
    *  •   1 x Jambinai (15 €)
    * Total: 67 €
    *
    * Affichage normal: 
    * Total: 67 €
    *
    * @author N. Deltour <nathandeltour2@gmail.com>
    * @version 0.2
    */
    var codeConcert, nbTicketGarland, nbTicketChris, nbTicketJambinai, prix;
    var showDetail = false;

    //Définition des constantes
    const PRIX_CONCERT_JEFFREYS = 26;
    const NOM_CONCERT_JEFFREYS = "Garland Jeffreys";

    const PRIX_CONCERT_CHRISTOPHE = 50;
    const NOM_CONCERT_CHRISTOPHE = "Christophe";

    const PRIX_CONCERT_JAMBINAI = 15;
    const NOM_CONCERT_JAMBINAI = "Jambinai";

    do {
        nbTicketGarland = 0; //On initialise ces trois variables à 0 au cas où l'utilisateur recommence tout le code
        nbTicketChris = 0;
        nbTicketJambinai = 0;

        do {
            do {
                codeConcert = parseInt(prompt('Pour quel(s) concerts souhaitez-vous réserver? Garland Jeffreys (100), Christophe (20), Jambinai (3)')); //Demande du concert
            } while (isNaN(codeConcert));

            switch (codeConcert) {
                case 100:
                    do {
                        /*Utilisation d'une affectation après addition (+=) si l'utilisateur rajoute le même concert
                        Un simple "=" réinisialiserait la valeur du nombre de tickets */
                        nbTicketGarland += parseInt(prompt('Combien de ticket(s) désirez-vous?'));
                    } while (isNaN(nbTicketGarland) || nbTicketGarland < 0);
                    break;

                case 20:
                    do {
                        nbTicketChris += parseInt(prompt('Combien de ticket(s) désirez-vous?'));
                    } while (isNaN(nbTicketChris) || nbTicketChris < 0);
                    break;

                case 3:
                    do {
                        nbTicketJambinai += parseInt(prompt('Combien de ticket(s) désirez-vous?'));
                    } while (isNaN(nbTicketJambinai) || nbTicketJambinai < 0);
                    break;

                default:
                    alert('Aucune séléction !');
            }

            prix = (nbTicketGarland * PRIX_CONCERT_JEFFREYS) + (nbTicketChris * PRIX_CONCERT_CHRISTOPHE) + (nbTicketJambinai * PRIX_CONCERT_JAMBINAI); //Calcul du prix

        } while (confirm('Voulez-vous ajouter un concert à votre commande?'));

        showDetail = confirm('Voulez-vous les détails tarifaires?'); //Demande de l'affichage détaillé

        if (!showDetail) { //Si showDetail=false
            document.write('<p>Total : ' + prix + ' €</p>'); //Affichage simple
        } else {
            document.write('<p>Votre sélection:</p>');
            if (nbTicketGarland != 0) { //Si il y a au moins 1 ticket pour un concert
                document.write('<p>• ' + nbTicketGarland + ' x ' + NOM_CONCERT_JEFFREYS + ' (' + PRIX_CONCERT_JEFFREYS + ' €)</p>');
            }
            if (nbTicketChris != 0) {
                document.write('<p>• ' + nbTicketChris + ' x ' + NOM_CONCERT_CHRISTOPHE + ' (' + PRIX_CONCERT_CHRISTOPHE + ' €)</p>');
            }
            if (nbTicketJambinai != 0) {
                document.write('<p>• ' + nbTicketJambinai + ' x ' + NOM_CONCERT_JAMBINAI + ' (' + PRIX_CONCERT_JAMBINAI + ' €)</p>');
            }
            document.write('<p>Total: ' + prix + ' €</p>');
        }
    } while (confirm('Voulez-vous recommencer?')); //Retry
</script>

</html>
